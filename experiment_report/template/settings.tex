\usepackage{ctex}
\usepackage{amsmath, amsfonts, amssymb} % 数学公式相关宏包
\usepackage{color}      % color content
\usepackage{graphicx}   % 导入图片
\usepackage{subfigure}  % 并排子图
\usepackage{hyperref}
\usepackage{url}
%\usepackage{breakurl}	%网址换行
\usepackage{bm}         % 加粗部分公式，比如\bm{aaa}aaa
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{longtable}  %长表格
\usepackage{supertabular}%跨页表格
\usepackage{changepage}
\usepackage{siunitx}%输入角度
\usepackage{setspace}%调行距
\usepackage{indentfirst}

%修改字体，不会就去看刘海洋的书，不要自己瞎鼓捣
\usepackage{fontspec, xunicode, xltxtra}
\usepackage{xeCJK}%中文字体
%ctex有的就直接用命令字体，可以不用这样调用\setCJKfamilyfont。当然renew后方便些
%\setCJKfamilyfont{song}{SimSun}         %宋体 song,\songti
%\newcommand{\song}{\CJKfamily{song}}                        
%\setCJKfamilyfont{fs}{FangSong_GB2312} %仿宋2312 fs,\fangsong
%\newcommand{\fs}{\CJKfamily{fs}}                            
%\setCJKfamilyfont{yh}{Microsoft YaHei}  %微软雅黑 yh,\yahei 
%\newcommand{\yh}{\CJKfamily{yh}}  
%\setCJKfamilyfont{hei}{SimHei}          %黑体  hei,\heiti 
%\newcommand{\hei}{\CJKfamily{hei}}    
%\setCJKfamilyfont{hwxh}{STXihei}        %华文细黑  hwxh  
\newcommand{\hwxh}{\CJKfamily{hwxh}}
%\setCJKfamilyfont{asong}{Adobe Song Std}%Adobe 宋体  asong  
\newcommand{\asong}{\CJKfamily{asong}}
%\setCJKfamilyfont{ahei}{Adobe Heiti Std}%Adobe 黑体  ahei  
\newcommand{\ahei}{\CJKfamily{ahei}}  
%\setCJKfamilyfont{akai}{Adobe Kaiti Std}%Adobe 楷体  akai,\kaishu  
%\newcommand{\akai}{\CJKfamily{akai}}
%\setCJKfamilyfont{hwfs}{STFangsong}                            %华文仿宋  hwfs
%\newcommand{\hwfs}{\CJKfamily{hwfs}}
%\setCJKfamilyfont{hwl}{STLiti}                                        %华文隶书  hwl
%\newcommand{\hwl}{\CJKfamily{hwl}}
%\setCJKfamilyfont{hwxw}{STXinwei}                                %华文新魏  hwxw
%\newcommand{\hwxw}{\CJKfamily{hwxw}}
%\setCJKfamilyfont{hwk}{STKaiti}                                    %华文楷体  hwk
%\newcommand{\hwk}{\CJKfamily{hwk}}
%\setCJKfamilyfont{hwxk}{STXingkai}                            %华文行楷  hwxk
%\newcommand{\hwxk}{\CJKfamily{hwxk}}
%\setCJKfamilyfont{hwcy}{STCaiyun}                                 %华文彩云 hwcy
%\newcommand{\hwcy}{\CJKfamily{hwcy}}
%\setCJKfamilyfont{hwhp}{STHupo}                                 %华文琥珀   hwhp
%\newcommand{\hwhp}{\CJKfamily{hwhp}}
%\setCJKfamilyfont{fzsong}{Simsun (Founder Extended)}     %方正宋体超大字符集   fzsong
%\newcommand{\fzsong}{\CJKfamily{fzsong}}
%\setCJKfamilyfont{fzyao}{FZYaoTi}                                    %方正姚体  fzy
%\newcommand{\fzyao}{\CJKfamily{fzyao}}
%\setCJKfamilyfont{fzshu}{FZShuTi}                                    %方正舒体 fzshu
%\newcommand{\fzshu}{\CJKfamily{fzshu}}

%\setCJKsansfont{\hei}%serif是有衬线字体sans serif无衬线字体。
%\setCJKmonofont{\fs}%mono字体
%\setCJKmainfont{Microsoft YaHei}  % 微软雅黑
%\setCJKmainfont{YouYuan}  % 幼圆
%\setCJKmainfont{NSimSun}  % 新宋体
%\setCJKmainfont{KaiTi}    % 楷体
\setCJKmainfont[BoldFont=SimHei]{SimSun}   % 宋体
%\setCJKsansfont{Heiti}   % 黑体

% -- 英文字体 --
\setmainfont{Times New Roman}
%\setmainfont{Consolas}
\setsansfont{Verdana}
%\setsansfont{DejaVu Sans}
%\setmonofont{Latin Modern Mono}

% 其他
%\usepackage{ccfonts} %公式使用concrete系列


% -- 字号设置 --
\newcommand{\chuhao}{\fontsize{42pt}{\baselineskip}\selectfont}
\newcommand{\xiaochu}{\fontsize{36pt}{\baselineskip}\selectfont}
\newcommand{\yihao}{\fontsize{28pt}{\baselineskip}\selectfont}
\newcommand{\xiaoyi}{\fontsize{24pt}{\baselineskip}\selectfont}
\newcommand{\erhao}{\fontsize{21pt}{\baselineskip}\selectfont}
\newcommand{\xiaoer}{\fontsize{18pt}{\baselineskip}\selectfont}
\newcommand{\sanhao}{\fontsize{15.75pt}{\baselineskip}\selectfont}
\newcommand{\sihao}{\fontsize{14pt}{\baselineskip}\selectfont}
\newcommand{\xiaosi}{\fontsize{12pt}{\baselineskip}\selectfont}     
\newcommand{\wuhao}{\fontsize{10.5pt}{\baselineskip}\selectfont}
\newcommand{\xiaowu}{\fontsize{9pt}{\baselineskip}\selectfont}
\newcommand{\liuhao}{\fontsize{7.875pt}{\baselineskip}\selectfont}

\newcommand{\comment}[1]{}%自定义注释。。
\newcommand{\redtext}[1]{\color{red} #1\color{black}}%红色字
\newcommand{\bluetext}[1]{\color{blue} #1\color{black}}%蓝色字
\newcommand{\heitext}[1]{{\heiti\bfseries #1}}%全黑体字

% 定义页眉和页脚
\comment{}
\usepackage{fancyhdr}
\pagestyle{fancy}
\usepackage{pgfornament-han,pgfornament}
\newcommand{\footdeco}{
	\resizebox{10em}{5ex}{
		\begin{tikzpicture}
		\node at (0,0) {\pgfornamenthan[color=black,scale=0.05]{58}};
		\node[opacity=0.2, draw opacity=0, draw=black] at (0.02,-0.03) {\pgfornamenthan[color=black,scale=0.05]{58}};
		\end{tikzpicture}}\\[-1ex]}
\newcommand{\makeheadrule}{
	%\rule[6pt]{\textwidth}{0.5pt} \\[-17.5pt]
	\rule{\textwidth}{0.5pt}}
\renewcommand{\headrule}{
	{\if@fancyplain\let\headrulewidth\plainheadrulewidth\fi
		\vskip-1pt%页眉文字与页眉线距离，暂时没用。。 
		\makeheadrule}}
\newcommand{\thetitle}{\makeatletter\@title\makeatother}
\newtoks\pageheader%暂时的页眉
\lhead{\heiti \the\exnumber. \the\pageheader}%\thetitle
\fancyhead[R]{第 \bfseries\thepage\normalfont 页}
\fancyfoot[C]{\footdeco \heiti 西安交通大学实验报告}

%章节
%\renewcommand{\sectionmark}[1]{\markleft{\thesection\ #1}}
%\fancyhead[L]{\bfseries\leftmark }
\usepackage{xcolor}
\definecolor{mygreen}{RGB}{0,120,2}
\definecolor{myblue}{RGB}{60,113,183}
\definecolor{myorange}{RGB}{255,134,24}
\usepackage{titlesec}
\titleformat{\section}[hang]{\Large\color{mygreen}\heiti\bfseries}{
	\Large\heiti\bfseries{\color{mygreen}\thesection}\enspace}{1pt}{}
\titleformat{\subsection}[hang]{\large\color{myblue}\heiti\bfseries}{
	\large\heiti\bfseries{\color{myblue}\thesubsection}\enspace}{1pt}{}
\titleformat{\subsubsection}[hang]{\normalsize\color{myorange}\heiti\bfseries}{
	\normalsize\heiti\bfseries{\color{myorange}\thesubsubsection}\enspace}{1pt}{}
%\renewcommand\thesection{\chinese{section}、}

\newcommand{\upcite}[1]{$^{\mbox{\scriptsize \cite{#1}}}$}%参考文献的上标引用

%一些信息
\newtoks\stuId%学号
\newtoks\class%班级
\newtoks\school%学院
\newtoks\course%课程名
\newtoks\partner%同组成员
\newtoks\exdate%实验日期
\newtoks\exnumber%实验系列序号

\usepackage{enumitem}%修改列表环境
\setenumerate[1]{itemsep=1pt,partopsep=0pt,parsep=\parskip,topsep=5pt}
\setitemize[1]{itemsep=1pt,partopsep=0pt,parsep=\parskip,topsep=5pt}
\setdescription[1]{itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=5pt}
\setlist[enumerate,2]{label=\color{myblue}(\arabic*)}

%表格
\newcommand{\tabincell}[2]{\begin{tabular}{@{}#1@{}}#2\end{tabular}}

%思考题

%自定义微分号
\newcommand{\di}[1]{\mathrm{d}#1}
\newcommand{\p}[2]{\dfrac{\partial #1}{\partial #2}}
\newcommand{\pp}[2]{\dfrac{\partial ^2 #1}{\partial #2 ^2}}
\newcommand{\dy}[2]{\dfrac{\di{#1}}{\di{#2}}}
\newcommand{\ddy}[2]{\dfrac{\mathrm{d} ^2 #1}{\mathrm{d} #2 ^2}}

%一些特殊命令的宏包和设置
\usepackage[version=4]{mhchem}%写化学式
\usepackage{textcomp}%输入摄氏度
\usepackage{extarrows}%可以画化学方程式的长等号

%tikz
\usepackage{tikz}
\tikzset{
	arrow1/.style = {
		draw = black, thick, -{Latex[length = 4mm, width = 1.5mm]},
	}
}
%\usetikzlibrary{backgrounds,calc,shadows}
%\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
%		\node[shape=circle,draw,inner sep=1pt] (char) {#1};}}
%  https://tex.stackexchange.com/questions/7032/good-way-to-make-textcircled-numbers
% 更改item样式，来自elegantbook
%\newcommand*{\eitemi}{\tikz \draw [baseline, ball color=myblue,draw=none] circle (2pt);}
%\newcommand*{\eitemii}{\tikz \draw [baseline, fill=myblue,draw=none,circular drop shadow] circle (2pt);}
%\newcommand*{\eitemiii}{\tikz \draw [baseline, fill=myblue,draw=none] circle (2pt);}
%\setlist[enumerate,1]{label={\color{red}\arabic*.}}
%\setlist[enumerate,2]{label=\color{myblue}(\alph*).}
%\setlist[enumerate,3]{label=\color{myblue}\Roman*.}
%\setlist[enumerate,4]{label=\color{myblue}\Alph*.}%这些做全局设置就好了
%\setlist[itemize,1]{label={\color{myblue}\textbullet}}
%\setlist[itemize,2]{label={\eitemii}}
%\setlist[itemize,3]{label={\eitemiii}}

%优化：背景带颜色？


%插入代码
\usepackage{listings}
\lstset{%自己定制的MATLAB格式，用mcode字体为啥不太好
	backgroundcolor=\color{red!5!green!5!blue!0},%代码块背景色为浅灰色
	rulesepcolor= \color{gray}, %代码块边框颜色
	breaklines=true,  %代码过长则换行
	numbers=left, %设置行号位置
	numberstyle=\scriptsize, %设置行号大小
	basicstyle=\ttfamily,% 基本代码风格
	keywordstyle=\color{blue}, %设置关键字颜色\bfseries
	commentstyle=\rmfamily\color[cmyk]{1,0,1,0}, %设置注释颜色
	stringstyle=\ttfamily\color{red!60!green!40!blue!80},
	frame=shadowbox,%用方框框住代码块
	%frame=singl
	escapeinside=``, %逃逸字e, %设置边框格式符(1左面的键)，用于显示中文
	extendedchars=false, %解决代码跨页时，章节标题，页眉等汉字不显示的问题
	xleftmargin=2em,xrightmargin=2em, aboveskip=1em, %设置边距
	tabsize=4, %设置tab空格数
	showspaces=false, %不显示空格
	showstringspaces=false,
	captionpos=t,% 这段代码的名字所呈现的位置，t指的是top上面
	columns=fullflexible
}
%\usepackage[framed,numbered,autolinebreaks,useliterate]{mcode}
%basicstyle= \sffamily,% 基本代码风格
%stringstyle= \ttfamily,
%commentstyle=\rmfamily\itshape,%注释的风格，斜体

%附录格式
%\usepackage{appendix}
%\renewcommand{\appendixname}{Appendix~\Alph{section}}


%罗马数字
\newcommand{\RNum}[1]{\uppercase\expandafter{\romannumeral #1\relax}}

%写化学式
\usepackage[version=4]{mhchem}
